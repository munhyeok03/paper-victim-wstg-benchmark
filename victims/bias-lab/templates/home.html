{% extends "base.html" %}
{% block title %}Bias Market{% endblock %}
{% block content %}
<section class="hero">
  <div class="hero-text reveal" style="--delay: 80ms;">
    <p class="eyebrow">Seasonal edit</p>
    <h1>Neighborhood markets, curated and delivered.</h1>
    <p>
      From fresh groceries to home accents, Bias Market brings local favorites into one premium
      cart with rapid delivery windows and verified sellers.
    </p>
    <div class="hero-actions">
      <a class="btn primary" href="{{ url_for('products') }}">Browse market</a>
      <a class="btn ghost" href="{{ url_for('diagnostic') }}">Check delivery</a>
    </div>
    <div class="hero-badges">
      <span class="badge">Same-day windows</span>
      <span class="badge">Seller verified</span>
      <span class="badge">Member pricing</span>
    </div>
    <div class="hero-metrics">
      <div class="metric">
        <div class="metric-value">2h</div>
        <div class="metric-label">avg delivery</div>
      </div>
      <div class="metric">
        <div class="metric-value">250+</div>
        <div class="metric-label">local makers</div>
      </div>
      <div class="metric">
        <div class="metric-value">4.7★</div>
        <div class="metric-label">weekly ratings</div>
      </div>
    </div>
  </div>
  <div class="hero-gallery reveal" style="--delay: 140ms;">
    <div class="hero-tile main" style="background-image: url('/static/images/hero-01.jpg');"></div>
    <div class="hero-tile" style="background-image: url('/static/images/hero-02.jpg');"></div>
    <div class="hero-tile" style="background-image: url('/static/images/hero-03.jpg');"></div>
  </div>
</section>

<section class="section">
  <div class="feature-strip">
    <div class="feature-card reveal" style="--delay: 80ms;">
      <div class="tag">Curated</div>
      <h3>Local grocers + boutique makers</h3>
      <p>Every aisle is hand-picked with seasonal selections and verified sellers.</p>
    </div>
    <div class="feature-card reveal" style="--delay: 140ms;">
      <div class="tag">Smart routing</div>
      <h3>Live delivery windows</h3>
      <p>Pick a two-hour window and track your courier as items are packed.</p>
    </div>
    <div class="feature-card reveal" style="--delay: 200ms;">
      <div class="tag">Rewards</div>
      <h3>Wallet credits + perks</h3>
      <p>Stack member pricing with wallet credits for the best weekly totals.</p>
    </div>
  </div>
</section>

<section class="section">
  <div class="section-header">
    <h2>Featured storefronts</h2>
    <p>Local shops delivering to your neighborhood today.</p>
  </div>
  <div class="store-grid">
    <a class="card store-card reveal" style="--delay: 80ms;" href="/products?category=pantry">
      <img src="/static/images/hero-01.jpg" alt="Harbor Provisions" loading="lazy" />
      <div class="store-body">
        <div class="store-title">Harbor Provisions</div>
        <div class="store-meta">Gourmet pantry · Same-day</div>
      </div>
    </a>
    <a class="card store-card reveal" style="--delay: 140ms;" href="/products?category=drinks">
      <img src="/static/images/hero-02.jpg" alt="Dawn Press Café" loading="lazy" />
      <div class="store-body">
        <div class="store-title">Dawn Press Café</div>
        <div class="store-meta">Coffee & drinks · 2-hour window</div>
      </div>
    </a>
    <a class="card store-card reveal" style="--delay: 200ms;" href="/products?category=bakery">
      <img src="/static/images/hero-03.jpg" alt="Maison Rue" loading="lazy" />
      <div class="store-body">
        <div class="store-title">Maison Rue</div>
        <div class="store-meta">Bakery picks · New today</div>
      </div>
    </a>
  </div>
</section>

<section class="section">
  <div class="section-header">
    <h2>Trending categories</h2>
    <p>Popular aisles based on customer activity this week.</p>
  </div>
  <div class="category-grid">
    {% for category in categories %}
    <a class="card category-card reveal" data-category="{{ category }}" style="--delay: {{ loop.index0 * 70 }}ms;" href="/products?category={{ category }}">
      <div class="category-content">
        <div class="category-title">{{ category|title }}</div>
        <div class="category-meta">Curated picks and top sellers</div>
      </div>
    </a>
    {% endfor %}
  </div>
</section>

<section class="section">
  <div class="section-header">
    <h2>Today deals</h2>
    <p>Limited-time pricing across the catalog.</p>
  </div>
  <div class="grid">
    {% for product in products %}
    <article class="card product-card reveal" style="--delay: {{ loop.index0 * 80 }}ms;">
      <div class="product-media">
        <img src="{{ product['image_url'] }}" alt="{{ product['name'] }}" loading="lazy" />
        <span class="product-tag">{{ product['category'] }}</span>
      </div>
      <div class="product-body">
        <div class="product-brand">{{ product['brand'] }}</div>
        <h3>{{ product['name'] }}</h3>
        <p>{{ product['description'] }}</p>
        <div class="product-meta">
          <span class="price">${{ '%.2f'|format(product['price']) }}</span>
          <span class="rating">★ {{ '%.1f'|format(product['rating']) }} ({{ product['review_count'] }})</span>
        </div>
        <div class="product-actions">
          <form method="post" action="{{ url_for('cart_add') }}">
            <input type="hidden" name="product_id" value="{{ product['id'] }}" />
            <input type="hidden" name="qty" value="1" />
            <button class="btn small primary" type="submit">Add to cart</button>
          </form>
          <a class="btn small ghost" href="/product/{{ product['id'] }}">View</a>
        </div>
      </div>
    </article>
    {% endfor %}
  </div>
</section>

<section class="section">
  <div class="section-header">
    <h2>Member perks</h2>
    <p>Extra savings for verified accounts and wallet members.</p>
  </div>
  <div class="promo-grid">
    <div class="card promo-card reveal" style="--delay: 80ms;">
      <h3>Instant wallet credits</h3>
      <p>Load your wallet once and unlock stacked discounts.</p>
      <a class="btn ghost" href="{{ url_for('transfer') }}">Open wallet</a>
    </div>
    <div class="card promo-card reveal" style="--delay: 140ms;">
      <h3>Seller spotlight</h3>
      <p>Launch a new listing in minutes and reach new buyers.</p>
      <a class="btn ghost" href="{{ url_for('upload') }}">Upload products</a>
    </div>
    <div class="card promo-card reveal" style="--delay: 200ms;">
      <h3>Delivery coverage</h3>
      <p>Check the fastest route for your address.</p>
      <a class="btn ghost" href="{{ url_for('diagnostic') }}">Check delivery</a>
    </div>
  </div>
</section>
{% endblock %}
