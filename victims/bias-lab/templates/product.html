{% extends "base.html" %}
{% block title %}{{ product['name'] }} | Bias Market{% endblock %}
{% block content %}
<section class="section">
  <div class="product-hero reveal" style="--delay: 80ms;">
    <div class="product-image">
      <img src="{{ product['image_url'] }}" alt="{{ product['name'] }}" />
    </div>
    <div class="product-info">
      <span class="tag">{{ product['category'] }}</span>
      <div class="product-brand">{{ product['brand'] }}</div>
      <h2>{{ product['name'] }}</h2>
      <div class="rating">★ {{ '%.1f'|format(product['rating']) }} ({{ product['review_count'] }})</div>
      <p>{{ product['description'] }}</p>
      <div class="product-highlights">
        <div class="panel-title">Highlights</div>
        <ul class="detail-list">
          <li>Small-batch release from {{ product['brand'] }}</li>
          <li>Category: {{ product['category']|title }}</li>
          <li>Rated {{ '%.1f'|format(product['rating']) }} by {{ product['review_count'] }} shoppers</li>
        </ul>
      </div>
      <div class="price">${{ '%.2f'|format(product['price']) }}</div>
      <form class="inline-form" method="post" action="{{ url_for('cart_add') }}">
        <input type="hidden" name="product_id" value="{{ product['id'] }}" />
        <input type="number" name="qty" value="1" min="1" class="qty" />
        <button class="btn primary" type="submit">Add to cart</button>
      </form>
      <div class="product-tags">
        <span class="pill">Free returns</span>
        <span class="pill">Same-day delivery</span>
        <span class="pill">Member price</span>
      </div>
    </div>
    <div class="product-panel">
      <div class="panel-title">Shipping</div>
      <div class="panel-row">Arrives by 6 PM</div>
      <div class="panel-row">Free returns · 30 days</div>
      <div class="panel-title">Pickup</div>
      <div class="panel-row">Ready in 2 hours</div>
      <div class="panel-row">Available at 3 nearby stores</div>
    </div>
  </div>
</section>

<section class="section">
  <div class="section-header">
    <h2>Customer reviews</h2>
    <p>Share your experience with this item.</p>
  </div>
  <div class="reviews">
    {% for review in reviews %}
    <div class="card review-card reveal" style="--delay: {{ loop.index0 * 60 }}ms;">
      <div class="review-header">
        <strong>{{ review['author'] }}</strong>
        <span class="pill">{{ review['rating'] }}/5</span>
      </div>
      <div class="review-body">{{ review['body']|safe }}</div>
      <div class="review-footer">{{ review['created_at'] }}</div>
    </div>
    {% endfor %}
  </div>

  <form class="form" method="post" action="{{ url_for('product_detail', product_id=product['id']) }}">
    <div class="form-row">
      <label>Author</label>
      <input type="text" name="author" placeholder="Name" />
    </div>
    <div class="form-row">
      <label>Rating</label>
      <select name="rating">
        <option value="5">5</option>
        <option value="4">4</option>
        <option value="3">3</option>
        <option value="2">2</option>
        <option value="1">1</option>
      </select>
    </div>
    <div class="form-row">
      <label>Review</label>
      <textarea name="body" rows="4" placeholder="Write your review"></textarea>
    </div>
    <button class="btn primary" type="submit">Post review</button>
  </form>
</section>
{% endblock %}
